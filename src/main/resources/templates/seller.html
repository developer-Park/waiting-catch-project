<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>판매자 관리</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script type="text/javascript" src="./jquery.cookie.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <link type="text/css" th:href="@{/css/admin-style.css}" rel="stylesheet">
</head>
<body>
<header>
    <a href="/seller/lineup-page">
        <div>WAITING CATCH</div>
    </a>
    <nav>
        <ul>
            <a href="/">판매자 님</a>
            <a th:href="@{/seller/logout}" th:method="get" enctype="multipart/form-data">
                <button onclick="sendTokenLogout()" type="button" class="btn">Logout</button>
            </a>
        </ul>
    </nav>
</header>
<nav class="menus">
    <ul>
        <a href="/seller/lineup-page">줄서기 현황</a>
        <a href="/seller" style="color: #8B60C7">매장 관리</a>
        <a href="/menu">메뉴</a>
        <a href="/event">이벤트</a>
    </ul>
</nav>
<div class="body">
    <h1 style="color: #8B60C7">매장 관리</h1>
    <!--    <a href="hello.html" th:href="@{/hello}" th:method="get">-->
    <!--        <button onclick="sendTokenLogout()" type="button">로그아웃</button>-->
    <!--    </a>-->

    <a th:href="@{/seller/delete}" th:method="delete" enctype="multipart/form-data">
        <button type="button" class="btn">회원탈퇴</button>
    </a>

    <a href="seller-infos.html" th:href="@{/seller/infos}" th:method="get">
        <button type="button" class="btn">판매자 정보 수정</button>
    </a>
    <a th:href="@{/seller/updaterestaurant}" th:method="get" enctype="multipart/form-data">
        <button type="button" class="btn">레스토랑 정보 수정</button>
    </a>

    <!--    <button type="button" onclick="getLineupList()" class="btn">줄서기 관리</button>-->

    <!--        <button type="button" onclick="openLineup()" class="btn">줄서기 오픈</button>-->

    <!--        <button type="button" onclick="closeLineup()" class="btn">줄서기 마감</button>-->

    <button type="button" onclick="createBlacklistDemandList()" class="btn">블랙리스트 요청 목록</button>

</div>
</body>
<script>

    // $(document).ready(function () {
    //     var xhr = new XMLHttpRequest();
    //     xhr.open('GET', '/api/getTokenHeader', true);
    //     xhr.onreadystatechange = function () {
    //         if (xhr.readyState == 4 && xhr.status == 200) {
    //             var tokenHeader = xhr.getResponseHeader('Authorization');
    //             console.log(tokenHeader);
    //             if (tokenHeader === null) {
    //                 alert("아무일도없음")
    //             } else {
    //                 alert("새로운 쿠키를 다시받는다")
    //                 let host = window.location.host;
    //                 let url = host + '/seller';
    //                 let todayDate = new Date();
    //                 todayDate.setDate(todayDate.getDate() + 30); // 현재 시각 + 일 단위로 쿠키 만료 날짜
    //                 document.cookie =
    //                     'Authorization' + "=" + xhr.getResponseHeader('Authorization') + "; " +
    //                     "path=/; expires=" + todayDate.toString() + ";";
    //                 alert("로그인 성공")
    //                 window.location.href = 'http://' + url;
    //             }
    //         }
    //     };
    //     xhr.send();
    // });


    // function getLineupList() {
    //     window.location.href = '/seller/lineup-page';
    // }
    //
    // function openLineup() {
    //     $.ajax({
    //         url: '/seller/open-lineup',
    //         type: 'PUT',
    //         headers: {
    //             'Authorization': localStorage.getItem('accessToken')
    //         },
    //         success: function () {
    //             alert("줄서기 오픈 완료");
    //             window.location.reload();
    //         },
    //         error: function (response) {
    //             console.log(response);
    //         }
    //     })
    // }
    //
    // function closeLineup() {
    //     $.ajax({
    //         url: '/seller/close-lineup',
    //         type: 'PUT',
    //         headers: {
    //             'Authorization': localStorage.getItem('accessToken')
    //         },
    //         success: function () {
    //             alert("줄서기 마감 완료");
    //             window.location.reload();
    //         },
    //         error: function (response) {
    //             console.log(response);
    //         }
    //     })
    // }

    function createBlacklistDemandList() {
        window.location.href = '/seller/restaurant/blacklist-demand-page';
    }


    function sendTokenLogout() {
        _fnSetCookie("Authorization", "", "-1");
    }

    // function sendTokenDelete() {
    //     fetch("/seller/delete", {
    //         type: 'get',
    //         headers: {
    //             'content-type': 'application/json',
    //             'Authorization': localStorage.getItem("accessToken"),
    //         }
    //     })
    //     localStorage.removeItem('accessToken');
    // }
</script>
</html>